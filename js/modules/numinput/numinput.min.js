layui.define(["jquery"],function(a){var b=layui.$;b("head link:last")[0]&&b("head link:last").after("<style type=\"text/css\">.layui-input-number + .layui-keyboard-number { position: absolute; display: block; border-radius: 2px; outline: none; background-color: #f2f2f2; }.layui-keyboard-number .layui-card-body { font-family: Consolas; font-size: 17px; font-weight: 600; text-align: center; background-color: #ffffff; cursor: pointer; }.layui-keyboard-number .layui-card-body:active { background-color: #f2f2f2; }</style>")||b("head").append("<style type=\"text/css\">.layui-input-number + .layui-keyboard-number { position: absolute; display: block; border-radius: 2px; outline: none; background-color: #f2f2f2; }.layui-keyboard-number .layui-card-body { font-family: Consolas; font-size: 17px; font-weight: 600; text-align: center; background-color: #ffffff; cursor: pointer; }.layui-keyboard-number .layui-card-body:active { background-color: #f2f2f2; }</style>");a("numinput",{options:{topBtns:123,rightBtns:!0,listening:!0},init:function(a){var c=this,d=b.extend(c.options,a);b(".layui-input-number").attr({readonly:"readonly"}).on("focus",function(){c.showKeyboard(c,b(this),d)})},showKeyboard:function(a,c,d){var e=c.next(".layui-keyboard-number");if(e[0])e.show();else{var f=d.rightBtns?"xs3":"xs4",g=d.rightBtns?"xs6":"xs4",h=["<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"49 97\">1</div>","</div>","</div>","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"50 98\">2</div>","</div>","</div>","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"51 99\">3</div>","</div>","</div>"].join(""),i=["<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"55 103\">7</div>","</div>","</div>","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"56 104\">8</div>","</div>","</div>","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"57 105\">9</div>","</div>","</div>"].join(""),j=["<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"8\" lay-tips=\"\u9000\u683C\">","<i class=\"layui-icon layui-icon-return\"></i>","</div>","</div>","</div>"].join(""),k=["<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"38 39\" lay-tips=\"\u589E\u52A0\">","<i class=\"layui-icon layui-icon-up\"></i>","</div>","</div>","</div>"].join(""),l=["<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"37 40\" lay-tips=\"\u51CF\u5C0F\">","<i class=\"layui-icon layui-icon-down\"></i>","</div>","</div>","</div>"].join(""),m=["<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"-1\" lay-tips=\"\u6E05\u7A7A\">","<i class=\"layui-icon layui-icon-refresh-1\"></i>","</div>","</div>","</div>"].join("");c.after(["<div tabindex=\"0\" hidefocus=\"true\" class=\"","layui-keyboard-number"," layui-unselect\" ","style=\"width:",c.width()+11,"px;\">","<div class=\"layui-row layui-col-space1\">",789==d.topBtns?i:h,d.rightBtns?j:"","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"52 100\">4</div>","</div>","</div>","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"53 101\">5</div>","</div>","</div>","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"54 102\">6</div>","</div>","</div>",d.rightBtns?k:"",789==d.topBtns?h:i,d.rightBtns?l:"",d.rightBtns?"":j,"<div class=\"layui-col-",g,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"48 96\">0</div>","</div>","</div>","<div class=\"layui-col-",f,"\">","<div class=\"layui-card\">","<div class=\"layui-card-body\" data-keycode=\"110 190\">.</div>","</div>","</div>",d.rightBtns?m:"","</div>","</div>"].join("")),e=c.next(".layui-keyboard-number"),e.on("touchstart click",".layui-card-body",function(d){a.setValue(a,c,b(this)),layui.stope(d)}),e.on("blur",function(){var a=c.val();a.indexOf(".")===a.length-1&&c.val(a+"0"),e.remove()}),d.listening&&a.initKeyListening(a,c,e)}e.focus()},initKeyListening:function(a,c,d){var f,g;d.on("keydown",function(h){g=h.keyCode;var e=parseInt(c.val())||0;return 107===g||h.shiftKey&&187===g?0>e&&a.setValueRange(a,c,Math.abs(e)):109===g||h.shiftKey&&189===g?0<e&&a.setValueRange(a,c,"-"+e):(f=d.find(".layui-card-body[data-keycode~="+g+"]"),f[0]&&f.trigger("click").css("background-color","#f2f2f2"),d.off("keyup").on("keyup",function(){b(".layui-card-body[data-keycode]").css("background-color","#ffffff")})),!1})},setValueRange:function(a,b,c){var d=b.data("prec"),e=b.attr("min")||-9223372036854776000,f=b.attr("max")||9223372036854776000;console.log(e,f,d),isNaN(d)||(d=Math.pow(10,d),c=Math.round(c*d)/d),c<e&&(c=e,a.tips(b,"\u6700\u5C0F\u503C\u4E3A "+e+"\uFF01")),c>f&&(c=f,a.tips(b,"\u6700\u5927\u503C\u4E3A "+f+"\uFF01")),c=c<e?e:c>f?f:c,b.val(c)},setValue:function(a,c,d){var e=b.trim(c.val()),f=b.trim(d.text()),g=-1<e.indexOf(".");if(-1<b.inArray(f,["0","1","2","3","4","5","6","7","8","9","."])){if("."===f&&(""===e||g))return;if("0"===f&&0===e.indexOf("0")&&!g)return;e=("."!==f&&"0"===e?"":e)+f,a.setValueRange(a,c,e)}else{var h=c.attr("step"),i=""===e?0:e;switch(g?(h=parseFloat(h)||.1,i=parseFloat(i)):(h=parseInt(h,10)||1,i=parseInt(i,10)),d.data("keycode")){case"38 39":i+=h;break;case"37 40":i-=h;break;case 8:var j=e.length;return void(j&&c.val(e.substring(0,j-1)));case-1:return void c.val("");}a.setValueRange(a,c,i)}},tips:function(a,b){return layer.tips(b,a,{tips:1,time:2e3,anim:6})}})});